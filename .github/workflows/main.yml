name: github actions build and deploy pages
on:
  push: 
    branches:
      - master


 jobs: # 工作流
  build: # 自定义名称
  runs-on: ubuntu-latest #运行在虚拟机环境ubuntu-latest

  strategy:
    matrix:
    node-version: [14.x]

  steps: # 步骤
    - name: Checkout # 步骤1
    uses: actions/checkout@v1 # 使用的动作。格式：userName/repoName。
    #作用：检出仓库，获取源码。 官方actions库：https://github.com/actions
    - name: Use Node.js ${{ matrix.node-version }} # 步骤2
    uses: actions/setup-node@v1 # 作用：安装nodejs
    with:
      node-version: ${{ matrix.node-version }} # 版本
    - name: Deploy # 步骤3 部署到github gh-pages
    env: # 设置环境变量
      GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN }} # token私密变量
    - run: |
      cd blog_depoly
      npm install 
      npm run deploy
