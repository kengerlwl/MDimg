# Python 数据库池子

## 引言
假设网站一天有很大的访问量，数据库服务器就需要为每次连接创建一次数据库连接，极大的浪费数据库的资源，并且极易造成数据库服务器内存溢出、拓机。
数据库连接是一种关键的有限的昂贵的资源,这一点在多用户的网页应用程序中体现的尤为突出.对数据库连接的管理能显著影响到整个应用程序的伸缩性和健壮性,影响到程序的性能指标.数据库连接池正式针对这个问题提出来的.数据库连接池负责分配,管理和释放数据库连接,它允许应用程序重复使用一个现有的数据库连接,而不是重新建立一个。

### 相关关键属性
1, 最小连接数:是连接池**一直保持的数据库连接**,所以如果应用程序对数据库连接的使用量不大,将会有大量的数据库连接资源被浪费.
2, 最大连接数:是连接池**能申请的最大连接数**,如果数据库连接请求超过次数,后面的数据库连接请求将被加入到等待队列中,这会影响以后的数据库操作
3, 如果最小连接数与最大连接数相差很大:那么最先连接请求将会获利,之后超过最小连接数量的连接请求等价于建立一个新的数据库连接.不过,这些大于最小连接数的数据库连接在使用完不会马上被释放,他将被放到连接池中等待重复使用或是空间超时后被释放.

### 相关要求
- DB连接池必须要确保某一时间内一个 conn 只能分配给一个线程。不同 conn 的事务是相互独立的。 
- 连接池的分配与释放
- 配置与维护
  如何确保连接池中的最小连接数呢？有**动态和静态**两种策略。动态即每隔一定时间就对连接池进行检测，如果发现连接数量小于最小连接数，则补充相应数量的新连接,以保证连接池的正常运转。静态是发现空闲连接不够时再去检查。



## redis 数据池与断开重连
官方有


## rabbitmq连接池
这个可能得自己写


## 参考
[https://www.cnblogs.com/-wenli/p/13578837.html](https://www.cnblogs.com/-wenli/p/13578837.html)